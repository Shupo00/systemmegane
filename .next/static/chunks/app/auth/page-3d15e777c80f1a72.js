(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[235],{8377:function(e,n,t){Promise.resolve().then(t.bind(t,1176))},1176:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var a=t(7437),s=t(2265),i=t(149),c=t(9376);function u(){let e=(0,i.o)(),n=(0,c.useRouter)(),[t,u]=(0,s.useState)(""),[o,r]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1);async function h(){if(!e){r("Supabase未設定です。プロジェクト直下の .env に NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY / SUPABASE_URL / SUPABASE_ANON_KEY を設定し、サーバを再起動してください。");return}d(!0),r("");let n="".concat(window.location.origin,"/auth/callback"),{error:a}=await e.auth.signInWithOtp({email:t,options:{emailRedirectTo:n}});d(!1),a?r(a.message):r("メールを送信しました。リンクからログインしてください。")}async function m(){e&&(await e.auth.signOut(),n.push("/"))}return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h2",{children:"ログイン"}),(0,a.jsx)("p",{className:"muted",children:"メールのマジックリンクでログインできます。"}),(0,a.jsx)("input",{className:"input",type:"email",placeholder:"you@example.com",value:t,onChange:e=>u(e.target.value)}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("button",{className:"btn primary",onClick:h,disabled:l,children:l?"送信中…":"ログインリンクを送る"}),(0,a.jsx)("button",{className:"btn ghost",onClick:m,children:"ログアウト"})]}),(0,a.jsx)("p",{className:"muted",children:o})]})}},149:function(e,n,t){"use strict";t.d(n,{o:function(){return s}});var a=t(5452);function s(){return(0,a.createClientComponentClient)()}}},function(e){e.O(0,[523,971,117,744],function(){return e(e.s=8377)}),_N_E=e.O()}]);