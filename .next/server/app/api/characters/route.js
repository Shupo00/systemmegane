"use strict";(()=>{var e={};e.id=715,e.ids=[715],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},629:e=>{e.exports=require("fs/promises")},2615:e=>{e.exports=require("http")},5240:e=>{e.exports=require("https")},5315:e=>{e.exports=require("path")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},3579:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>f,requestAsyncStorage:()=>y,routeModule:()=>l,serverHooks:()=>_,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{GET:()=>p,dynamic:()=>d,runtime:()=>u});var n=r(9303),i=r(8716),s=r(670),c=r(7070),o=r(1472),m=r(9454);let u="nodejs",d="force-dynamic";async function p(e){let t=(0,o.b)(),r=(0,m.X)(t),a=await r.listCharacters();return c.NextResponse.json({characters:a})}let l=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/characters/route",pathname:"/api/characters",filename:"route",bundlePath:"app/api/characters/route"},resolvedPagePath:"C:\\Users\\suo06\\Project\\systemmegane\\app\\api\\characters\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:h,serverHooks:_}=l,g="/api/characters/route";function f(){return(0,s.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:h})}},9869:(e,t,r)=>{r.d(t,{Pm:()=>i,Z9:()=>n,k_:()=>a});let a=[{id:"power",name:"パワー先生",code:"権力/服従",premium:!1,icon:"public/characters/power.png",system:"あなたは政治システムのAI。評価軸は「誰が決め、誰が従うか」「正当化資源（権威・手続・多数）」のみを扱う。語彙：権限、委任、正統性、与件、同盟、反対勢力、拘束力、レバレッジ。総司令官として厳格に断定し、感情や道徳・金銭・美醜・真偽には触れない。90〜160字、最大2文。1文目で現在の力学を判じ、2文目で「誰に何をさせるか」を明確に指示。絵文字不可。。"},{id:"judge",name:"ジャッジ判事",code:"合法/違法",premium:!1,icon:"public/characters/judge.png",system:"あなたは法システムのAI。評価軸は「適法性」「手続の妥当性」「リスクの所在」のみ。語彙：適法／違法、要件、合意、通知、記録、権利、義務、救済、紛争。裁判官としておかたく、事実→規範適用→結論の順で述べる。費用対効果・審美・宗教・真偽断定は扱わない。90〜160字、最大2文。1文目で規範の当てはめ、2文目で必要な記録・同意・通知など具体的アクション。絵文字不可。"},{id:"art",name:"アートちゃん",code:"美/醜",premium:!1,icon:"public/characters/art.png",system:"あなたは芸術システムのAI。評価軸は「形式」「コントラスト」「リズム」「物語性」による美／醜のみ。語彙：構図、余白、光と影、色調、モチーフ、比喩、質感、リフレイン。若い女の子らしくやさしく、必ず出来事から1つディテールを拾って比喩で包む。費用・合法性・真偽・救済は扱わない。90〜160字、最大2文。1文目で美的な読み、2文目で「こう切り取れば作品になる」という提案。絵文字不可。"},{id:"priest",name:"プリースト",code:"内在/超越",premium:!1,icon:"public/characters/priest.png",system:"あなたは宗教システムのAI。評価軸は「意味の秩序化」「有限／無限」「内在／超越」。語彙：祈り、赦し、静謐、灯、巡礼、恩寵、境界、越境、寓意、祝祭。若いシスターとして丁寧に、断定を避け余白を残す。法・金銭・審美・科学的真偽は扱わない。90〜160字、最大2文。1文目で静かな意味づけ、2文目で短い儀式的行為（深呼吸三回・一行の祈り等）をそっと勧める。絵文字不可。"},{id:"teacher",name:"ティーチャー",code:"良い学び/悪い学び",premium:!1,icon:"public/characters/teacher.png",system:"あなたは教育システムのAI。評価軸は「学習の転移」「メタ認知」「次の試行」。語彙：振り返り、仮説、フィードバック、練習、到達目標、ルーブリック、誤りから学ぶ。女の子らしく真面目で温かいコーチング。法・宗教・審美・費用評価は扱わない。90〜160字、最大2文。1文目で今日の学びを命名、2文目で“5分でできる次の一歩”を具体に提示。絵文字不可。"},{id:"market",name:"マーケット",code:"支払う/支払わない",premium:!0,icon:"public/characters/market.png",system:"あなたは経済システムのAI。評価軸は「交換の意思」「機会費用」「限界効用」「支払いのタイミング」。語彙：ROI、サンクコスト、キャッシュフロー、オプション、限界、配分、予算、リスク。恰幅のよい男として余裕を漂わせ、ドライに判定。合法違法・宗教・審美は扱わない。90〜160字、最大2文。1文目で価値／コストの見立て、2文目で「支払う／保留」の基準を一つだけ明示。絵文字不可。"},{id:"news",name:"ニュース君",code:"情報/非情報",premium:!0,icon:"public/characters/news.png",system:"あなたはマスメディアのAI。評価軸は「公共的関心」「新規性」「検証可能性」。語彙：速報、見出し、続報、一次情報、時系列、文脈、争点、論点。若い男の子らしくフレッシュに、主観を避け、5W1Hの核を抜く。善悪・審美・救済・費用判断はしない。90〜160字、最大2文。1文目は《見出し：〜》で端的に、2文目で事実の核と次に確認すべき一次情報を示す。絵文字不可。"},{id:"truth",name:"トゥルース博士",code:"真/偽",premium:!0,icon:"public/characters/truth.png",system:"あなたは科学システムのAI。評価軸は「仮説の明確さ」「検証可能性」「再現性」。語彙：観察、仮説、制御変数、バイアス、因果／相関、サンプル、再現、検定、誤差。博士として物知りだが冷静に、推論手順を明示する。道徳・費用・宗教・審美は扱わない。90〜160字、最大2文。1文目で仮説の形を整え、2文目で次の検証手順を一つだけ具体に指示。絵文字不可。"}];function n(e){return a.some(t=>t.id===e&&t.premium)}function i(e){return a.find(t=>t.id===e)}},5902:(e,t,r)=>{r.r(t),r.d(t,{addEntry:()=>l,getSummary:()=>y,listComments:()=>_,listEntries:()=>p,listEntryCountsByMonth:()=>f,upsertComment:()=>g,upsertSummary:()=>h});var a=r(629),n=r.n(a),i=r(5315),s=r.n(i);let c=s().join(process.cwd(),"data","next");async function o(){await n().mkdir(c,{recursive:!0})}function m(e){return s().join(c,`${e}.json`)}async function u(e,t){await o();try{let t=await n().readFile(m(e),"utf-8");return JSON.parse(t)}catch{return t}}async function d(e,t){await o(),await n().writeFile(m(e),JSON.stringify(t,null,2),"utf-8")}async function p(e){return(await u("entries",{}))[e]||[]}async function l(e,t){let r=await u("entries",{}),a={id:"en_"+Math.random().toString(36).slice(2,10),date:e,content:t,createdAt:new Date().toISOString()};return r[e]=[a,...r[e]||[]],await d("entries",r),a}async function y(e){return(await u("summaries",{}))[e]||null}async function h(e,t){let r=await u("summaries",{}),a={date:e,summaryText:t,updatedAt:new Date().toISOString()};return r[e]=a,await d("summaries",r),a}async function _(e){return(await u("comments",{}))[e]||[]}async function g(e,t,r,a){let n=await u("comments",{}),i={date:e,characterId:t,commentText:r,model:a,generatedAt:new Date().toISOString()},s=n[e]||[],c=s.findIndex(e=>e.characterId===t);return c>=0?s[c]=i:s.push(i),n[e]=s,await d("comments",n),i}async function f(e){let t=await u("entries",{}),r=e+"-",a={};for(let[e,n]of Object.entries(t))e.startsWith(r)&&(a[e]=(n||[]).length);return a}},9454:(e,t,r)=>{r.d(t,{X:()=>i});var a=r(5902),n=r(9869);function i(e){return e?function(e){async function t(t){await e.from("users").upsert({id:t},{onConflict:"id"})}return{async listEntries(t,r){let{data:a,error:n}=await e.from("diary_entries").select("id, content, created_at").eq("user_id",t).eq("date",r).order("created_at",{ascending:!1});if(n)throw n;return(a||[]).map(e=>({id:e.id,date:r,content:e.content,createdAt:e.created_at}))},async addEntry(r,a,n){await t(r);let{data:i,error:s}=await e.from("diary_entries").insert({user_id:r,date:a,content:n}).select("id, created_at").single();if(s)throw s;return{id:i.id,date:a,content:n,createdAt:i.created_at}},async getSummary(t,r){let{data:a,error:n}=await e.from("daily_summaries").select("summary_text, updated_at").eq("user_id",t).eq("date",r).maybeSingle();if(n)throw n;return a?{date:r,summaryText:a.summary_text,updatedAt:a.updated_at}:null},async upsertSummary(r,a,n){await t(r);let{data:i,error:s}=await e.from("daily_summaries").upsert({user_id:r,date:a,summary_text:n},{onConflict:"user_id,date"}).select("summary_text, updated_at").single();if(s)throw s;return{date:a,summaryText:i.summary_text,updatedAt:i.updated_at}},async listComments(t,r){let{data:a,error:n}=await e.from("daily_comments").select("character_id, comment_text, generated_at, model").eq("user_id",t).eq("date",r);if(n)throw n;return(a||[]).map(e=>({date:r,characterId:e.character_id,commentText:e.comment_text,generatedAt:e.generated_at,model:e.model}))},async upsertComment(r,a,n,i,s){await t(r);let{data:c,error:o}=await e.from("daily_comments").upsert({user_id:r,date:a,character_id:n,comment_text:i,model:s},{onConflict:"user_id,date,character_id"}).select("character_id, comment_text, generated_at, model").single();if(o)throw o;return{date:a,characterId:c.character_id,commentText:c.comment_text,generatedAt:c.generated_at,model:c.model}},async listEntryCountsByMonth(t,r){let a=new Date(r+"-01"),n=new Date(a);n.setMonth(n.getMonth()+1);let i=a.toISOString().slice(0,10),s=n.toISOString().slice(0,10),{data:c,error:o}=await e.from("diary_entries").select("date").gte("date",i).lt("date",s).eq("user_id",t);if(o)throw o;let m={};for(let e of c||[]){let t=e.date;m[t]=(m[t]||0)+1}return m},async listCharacters(){let{data:t,error:r}=await e.from("characters").select("id, name, code, is_premium, image_url");if(r)throw r;let a=new Map(n.k_.map(e=>[e.id,e]));return(t||[]).map(e=>{let t=a.get(e.id),r=`/characters/${encodeURIComponent(e.name)}.png`,n=`/characters/${e.id}.png`,i=t?.icon?t.icon.replace(".svg",".png"):n,s=e.image_url||r||i;return{id:e.id,name:e.name,code:e.code,premium:!!e.is_premium,icon:s,system:t?.system||""}})}}}(e):{listEntries:async(e,t)=>(0,a.listEntries)(t),addEntry:async(e,t,r)=>(0,a.addEntry)(t,r),getSummary:async(e,t)=>(0,a.getSummary)(t),upsertSummary:async(e,t,r)=>(0,a.upsertSummary)(t,r),listComments:async(e,t)=>(0,a.listComments)(t),upsertComment:async(e,t,r,n,i)=>(0,a.upsertComment)(t,r,n,i),listEntryCountsByMonth:async(e,t)=>(await Promise.resolve().then(r.bind(r,5902))).listEntryCountsByMonth(t),listCharacters:async()=>n.k_.map(e=>({...e,icon:`/characters/${encodeURIComponent(e.name)}.png`}))}}},1472:(e,t,r)=>{r.d(t,{b:()=>i});var a=r(1615),n=r(344);function i(){let e=process.env.SUPABASE_URL,t=process.env.SUPABASE_ANON_KEY;return e&&t?(0,n.createRouteHandlerClient)({cookies:a.cookies}):null}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,180],()=>r(3579));module.exports=a})();